# 復活機制設計

## 流程概述

1. **你決定復活** → 點擊「決定復活」
2. **觀看廣告**（必須完成，無法跳過）
3. **時空轉換** → 回到5年前
4. **系統說明** → 解釋挑戰規則
5. **開始改寫** → 進入 14 個關鍵時刻
6. **片段失手處理** → 觸發「毒舌系統」+「回到 5 分鐘前」再試一次（每看一次廣告＝多一次再試）

---

## 1. 決定復活

### 畫面呈現
- **按鈕**：「決定復活」
- **提示文字**：「觀看完廣告後，將回到5年前」
- **警告**：「此操作不可逆」

### 你的選擇
- 點擊「決定復活」→ 進入廣告階段
- 點擊「我拒絕」→ 結束（灰色，不可點）

---

## 2. 觀看廣告（營收機制）

### 必須完成
- **無法跳過**：必須完整觀看
- **時長**：30秒 - 1分鐘
- **類型**：可支援多種廣告格式

### 廣告完成後
- **獎勵提示**：「已獲得復活資格」
- **自動進入**：時空轉換動畫

### 營收考量
- **首次復活**：必須看廣告
- **後續機制**：可考慮付費跳過（後續擴展）

---

## 3. 時空轉換

### 視覺效果
- **動畫**：時間倒流效果
- **畫面**：快速閃過過去5年的關鍵片段（倒序）
- **音效**：時間倒流的音效

### 文字提示
- 「回到5年前...」
- 「2024年 → 2019年」
- 「準備改變過去...」

### 轉場時間
- **總時長**：約10-15秒
- **目的**：建立時空轉換的儀式感

---

## 4. 系統說明

### 說明內容

#### 4.1 復活規則
> 你已回到5年前。
> 
> 你將面對10個關鍵時刻（精簡版主線）。
> 
> 每個時刻，都是你人生轉折的節點。

#### 4.2 挑戰目標
> 針對那些悲慘的事故，
> 
> 一一反駁。
> 
> **一次一次改變親朋好友的看法。**
> 
> 改變事件的走向。

#### 4.3 挑戰方式
> 與角色對話。
> 
> 用你的話語，
> 
> 改變他們的決定。
> 
> 那些在前情提要中出現的人——
> 
> **主管、同事、戀人、HR、以及過去的你**
> 
> 他們會再次出現在你面前。

#### 4.4 成功條件
> 完成所有主線 10 次改寫（精簡版主線）。
> 
> 改變關鍵事件的走向。
> 
> 改變親朋好友對你的看法。
> 
> 你將獲得全新的未來。

### 畫面呈現
- **說明面板**：簡潔、清晰的文字說明
- **痕跡顯示**：0/{totalMoments}（你已改寫的時刻數；精簡版主線預設 10）
- **開始按鈕**：「開始改寫」

---

## 5. 開始改寫

### 進入挑戰
- 點擊「開始改寫」
- 進入第一個關鍵時刻
- 顯示「此刻目標」與登場人物

### 改寫流程
- **選擇時刻**：從 14 個關鍵時刻中選擇（或按順序）
- （精簡版主線）從 10 個關鍵時刻按順序改寫；完整版 14 幕保留做擴充
- **進入對話**：與對方對話
- **達成改寫**：達成目標後，痕跡 +1
- **繼續下一刻**：進入下一個關鍵時刻
- **看法改變**：每次成功，對應角色的看法會改變

---

## 6. 片段失手 → 毒舌系統 → 回到 5 分鐘前（再試一次）

> 這是「重生」的第二層：不是回到 5 年前，而是**在同一幕內回到 5 分鐘前**（通常等同於回到此刻的起點/第一句前）。

### 6.0 補充：毒舌系統是全程伴行（不只失手）

> 你不是被「引導」，你是被「審判」。毒舌系統會在以下節點出聲（每幕最多 3 次，避免刷屏）：

- 復活決定後（進入 2019 前）
- 每幕進場（第一句前）
- 你要輸入前或點擊提示選項時（依賴高/界線低/沒帶證據時，插一句）
- 改寫成立後（冷讚，不讓你爽）
- 拿到線索時（惡意解讀，逼你往下查）

### 6.1 觸發條件

- **片段失手**（超過輪次、屬性崩壞、未達目標）

### 6.2 失手呈現：言語羞辱（毒舌系統）

- 失手後立刻進入「毒舌系統」對話（1–3 句）
- 目的：
  - **情緒打擊**：讓你感受到代價（不只是按「再試一次」）
  - **動機反推**：用羞辱反向提醒你「你剛剛又在討好/又退縮了」
- 效果（數值）定義於 `出場角色.md`（失手事件會改動你的屬性）

### 6.3 規則：入幕 / 回溯都要付代價（看訊息或通行證）

> 目的：控制「多次嘗試」成本，避免 AI 對話被無限刷；同時維持沉浸（不在中途亂插別的廣告點）。

- **入幕**：每次走進一幕，都要看一次訊息（或消耗 1 次「免訊息通行證」）
- **回溯（回到 5 分鐘前）**：每次回溯都要看一次訊息（或消耗 1 次「免訊息通行證」）
- **付費去訊息（可選）**：購買「免訊息通行證」可抵扣入幕/回溯的訊息門檻（N 次）

### 6.4 回到 5 分鐘前的規則（rollback）

- **時間回溯點**：回到此刻「起點」或「第一句前」（視覺上呈現「回到 5 分鐘前」）
- **輪次**：重置
- **NPC 屬性**：回到進場快照（避免用無限試探刷出最佳路徑）
- **你的屬性**：
  - 行為成長（設界線/自我價值等）**保留**
  - 失手創傷（自責/壓力等）**保留**（讓再試一次有成本）

### 6.5 執行：看廣告 → 立刻回到 5 分鐘前

- 顯示「看廣告，回到 5 分鐘前」
- 看完廣告 → 立刻回到 5 分鐘前（再試一次）

### 6.6 按鈕/文字（失手畫面）

- 主要按鈕顯示「看一次訊息，回到 5 分鐘前」
- 次要按鈕顯示「用通行證回到 5 分鐘前」（若有剩餘次數）
- 「暫時離開」（回到時刻列表/主選單）


## 後續擴展

### 付費機制
- **免訊息通行證**：入幕/回溯可用（N 次，見 `AI對話串接.md`）
- **逼他說清楚（+5 句）**：句數用完時可延長本幕（每幕最多一次，見 `AI對話串接.md`）
- **加速改寫**：付費可加速「已改寫」累積（後續擴展）
- **額外片段**：付費解鎖額外內容（後續擴展）

### 痕跡保存
- **自動保存**：每完成一次改寫自動保存
- **繼續故事**：你可隨時暫停和繼續
- **回顧**：查看已改寫 / 尚未改寫的時刻

### 再試一次
- **時刻失手**：由「毒舌系統 + 回溯 5 分鐘」承接
- **重新開始**：可重新開始整個流程
- **難度調整**：根據你的表現調整難度

